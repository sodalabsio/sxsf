#!/usr/bin/env node

/**
 * This script scans the stories directory and generates a stories-index.ts file
 * Run it with: node scripts/generate-story-index.js
 */

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

// Get the directory name in ES modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Path to the stories directory
const storiesDir = path.join(__dirname, '../stories');

// Path to the output file
const outputFile = path.join(__dirname, '../src/stories-index.ts');

// Get all .ts files in the stories directory
const storyFiles = fs.readdirSync(storiesDir)
  .filter(file => file.endsWith('.ts'))
  .map(file => file.replace('.ts', ''));

// Generate the content for the stories-index.ts file
const content = `// This file is auto-generated by scripts/generate-story-index.js
// Do not edit it manually

export const storyFiles = [
  ${storyFiles.map(file => `'${file}'`).join(',\n  ')}
];
`;

// Write the content to the output file
fs.writeFileSync(outputFile, content);

console.log(`Generated stories index with ${storyFiles.length} stories`);
